<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, initial-scale=1, shrink-to-fit=no">
    <title>내가 사랑할 연극은?</title>
    <style>

    @font-face {
            font-family: 'KOTRALEAP';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2110@1.0/KOTRALEAP.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
    font-family: 'TTHakgyoansimYeohaengR';
    src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2402_keris@1.0/TTHakgyoansimYeohaengR.woff2') format('woff2');
    font-weight: normal;
    font-style: normal;
    }

    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap');

        body{
            margin: 0px;
            height: 100vh;
            background-image: url(./이미지/대지\ 1.png);
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            word-break: keep-all;
        }

        #full{
            width: 100%;
            max-width: 500px;
            height: 97vh;
            margin-left: auto;
            margin-right: auto;
            flex: 1;
            position: relative;
            justify-content: center;
            
        }

        .m-30 {
            margin-bottom: 30px;
        }

        .p-15 {
            padding-left: 15px;
            padding-right: 15px;
        }

        .intro {
            text-align: center;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            position: absolute;
            margin-top: 25vh;
            flex-direction: column;
            color: white;
        }

        .intro-sub {
            font-family: "Noto Sans KR", sans-serif;
            font-size: 18px;
            letter-spacing: 8px;
            word-spacing: 3px;
        }

        .intro-title {
            font-family: 'TTHakgyoansimYeohaengR';
            font-size: 37px;
        }

        #testgo {
            font-size: 25px;
            color: white;
            background-color: #F39800;
            font-family: 'TTHakgyoansimYeohaengR';
            width: 70%;
            border: none;
            padding-bottom: 10px;
            padding-top: 10px;
            position: absolute;
            bottom: -50vh;
        }

        .testend {
            font-size: 22px;
            color: white;
            background-color: #F39800;
            font-family: 'TTHakgyoansimYeohaengR';
            width: 70%;
            border: none;
            padding-bottom: 10px;
            padding-top: 10px;
            position: absolute;
            bottom: 10vh;
            opacity: 0;
            transform: translateY(30px);
            text-align: center;
        }

        .testend.slide-up {
            animation: SlideUp 0.4s ease-out forwards !important;
        }

        @keyframes SlideUp {
            0% {
                transform: translateY(30px);
                opacity: 0;
            }
            100% {
                transform: translateY(0px);
                opacity: 1;
            }
        }

        .result {
            display: flex;
            justify-content: center;
        }
        .resultLoad {
            position: relative;
            left: 0vw;
            top: 35vh;
            width: 60vw;
            height: 30px;
            margin: 50px auto;
            overflow: hidden;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: "Noto Sans KR", sans-serif;
            font-size: 18px;
            color: white;
        }

        .resultLoad span {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            transform: translateY(100%);
            transition: transform 0.3s ease-in-out;
        }
        .resultLoad span.active {
            transform: translateY(0);
        }
        
        .resultLoad span.exit {
            transform: translateY(-100%);
        }

        .curtain {
            width: 100%;
            height: 110%;
            background-image: url(./이미지/커튼대지\ 1.png);
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            position: absolute;
            top: 0;
            transition: top 0.7s ease-in-out, height 0.1s ease-in-out;
            
        }

        .progress-container {
            width: 84%;
            position: absolute;
            top: 4vh;
            left: 8%;
        }

        .progress-track {
            height: 10px;
            background: #e5e5e5;
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #EE5947;
            border-radius: 6px;
            width: 0%;
            transition: width 0.6s ease;
        }

        .question{
            max-width: 100%;
            justify-content: center;
        }

        .title{
            position: absolute;
            top: 20vh;
            width: 88%;
            height: 50px;
            text-align: center;
        }

        .title span{
            font-size: 22px;
            color: white;
            font-family: 'TTHakgyoansimYeohaengR';
        }


        .group{
            position: absolute;
            width: 100%;
            max-width: 500px;
            height: 100vw;
            max-height: 500px;
            padding:26px;
            bottom: 0.5vh;
        }
        
        .box{
            width: 95%;
            height: 95%;
            background-color: #F39800;
            color: transparent;
            border-radius: 24px;
            margin: 0 auto;
            position: relative;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }

        .boxClick{
            width: 100%;
            height: 100%;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 24px;
            margin: 0 auto;
            background-color: #EE5947;
            position: absolute;
            opacity: 0;
            transition: opacity 0.3s ease-in;
        }

        .boxClick span{
            font-size: 20px;
            text-align: center;
            font-family: "Noto Sans KR", sans-serif;
        }
        
        .question-slide-up .box {
            animation: elementSlideUp 0.2s ease-out forwards;
        }

        .question-slide-up .boxClick {
            animation: elementSlideUp 0.5s ease-out forwards;
        }

        .question-slide-up .title {
            animation: elementSlideUp 0.4s ease-out forwards;
        }

        @keyframes elementSlideUp {
            0% {
                transform: translateY(0);
                
            }
            100% {
                transform: translateY(-30px);
                opacity: 0;
                
            }
        }

        .question-slide-down .box {
            animation: elementSlidedown 0.4s ease-out forwards;
        }
        .question-slide-down .title {
            animation: elementSlidedown 0.3s ease-out forwards;
        }

        @keyframes elementSlidedown {
            0% {
                transform: translateY(-30px);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

    </style>

</head>

<body>


<div id="full" name="produces" style="z-index: 50; display: flex;">
    <div class="result" style="display: none;">
        <div class="resultLoad">
            <span num="1" >이야기 쓰는 중...</span>
            <span num="2" >음향 선정 중...</span>
            <span num="3" >무대 짓는 중...</span>
            <span num="4" >배우 분장하는 중...</span>
            <span num="5" >　</span>
            <span num="6" >막 올릴 준비 완료!</span>
        </div>
        <a class="testend">내가 사랑할 연극 확인하기</a>
        
    </div>

    <div class="intro p-15" style="display: flex;">
        <div class="intro-sub m-30">국립극단 청소년극연구소</div>
        <div class="intro-title">내가 사랑할 연극은?</div>
    <button id="testgo">테스트하기</button>
    </div>

</div>

<div id="full" name="quizs" style="z-index: 5; display: none; flex-direction: column;">


  <div class="progress-container">
        <div class="progress-track">
            <div class="progress-fill"></div>
        </div>
    </div>


    <div class="question p-15" count="1" style="display: flex;"> <!--한 질문페이즈 전체로 묶기--> 

        <div class="title">
            <span>Q1. 다음 중 가장 마음에 드는 감정은?</span>
            
    </div>


    <table class="group">
        <tr style="height: 50%;">
            <td style="width: 50%;">
                <div class="box" style="background-image: url(./이미지/q1-1.png);">
                    <div class="boxClick" num="1" data="a,g">
                        <span>설렘 가득한<br>사랑</span>
                        </div>
                </div>
            </td>
            <td>
                <div class="box" style="background-image: url(./이미지/q1-2.png);">
                    <div class="boxClick" num="2" data="d,e">
                    <span>뜨겁고 풋풋한<br>우정</span>
                </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="box" style="background-image: url(./이미지/q1-3.png);">
                    <div class="boxClick" num="3" data="h">
                    <span>건드리지 마!<br>분노</span></div>
                </div>
            </td>
            <td>
                <div class="box" style="background-image: url(./이미지/q1-4.png);">
                    <div class="boxClick" num="4" data="b,f">
                    <span>유쾌 경쾌한<br>웃음</span></div>
                </div>
            </td>
        </tr>
    
    </table>

    </div>

    <div class="question p-15" count="2" style="display: none;"> <!--한 질문페이즈 전체로 묶기--> 
        <div class="title">
            <span>Q2. 내가 가장 좋아하는 공간은?</span>
        </div>


    <table class="group">
        <tr style="height: 50%;">
            <td style="width: 50%;">                
                <div class="box" style="background-image: url(./이미지/q2-1.png);">
                    <div class="boxClick" num="1" data="b,d">
                        <span>익숙하고 정든<br>우리 마을</span>
                    </div>
                </div>
            </td>
            <td>
                <div class="box" style="background-image: url(./이미지/q2-2.png);">
                    <div class="boxClick" num="2" data="g,g">
                        <span>미스터리한<br>숲 속</span>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="box" style="background-image: url(./이미지/q2-3.png);">
                    <div class="boxClick" num="3" data="a,a">
                        <span>낭만 가득한<br>유럽 거리</span>
                    </div>
                </div>
            </td>
            <td>
                <div class="box" style="background-image: url(./이미지/q2-4.png);">
                    <div class="boxClick" num="4" data="c,f">
                        <span>처음 가 보는<br>환상 세계</span>
                    </div>
                </div>
            </td>
        </tr>
    
    </table>

    </div>

    <div class="question p-15" count="3" style="display: none;"> <!--한 질문페이즈 전체로 묶기--> 
        <div class="title">
            <span>Q3. 가장 취향인 그래픽 스타일은?</span>
        </div>


    <table class="group">
        <tr style="height: 50%;">
            <td style="width: 50%;">
                <div class="box" style="background-image: url(./이미지/q3-1.png);">
                    <div class="boxClick" num="1" data="d,h,h">
                        <span>진중한<br>사실주의</span>
                    </div>
                </div>
            </td>
            <td>
                <div class="box" style="background-image: url(./이미지/q3-2.png);">
                    <div class="boxClick" num="2" data="g,f,c,d">
                        <span>발랄한<br>콜라주</span>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="box" style="background-image: url(./이미지/q3-3.png);">
                    <div class="boxClick" num="3" data="b,e">
                        <span>친근한<br>수채화</span>
                    </div>
                </div>
            </td>
            <td>
                <div class="box" style="background-image: url(./이미지/q3-4.png);">
                    <div class="boxClick" num="4" data="a">
                        <span>우아한<br>유화</span>
                    </div>
                </div>
            </td>
        </tr>
    
    </table>

    </div>

    <div class="question p-15" count="4" style="display: none;"> <!--한 질문페이즈 전체로 묶기--> 
        <div class="title">
            <span>Q4. 내 마음을 울리는 이야기 소재는?</span>
        </div>


    <table class="group">
        <tr style="height: 50%;">
            <td style="width: 50%;">
                <div class="box" style="background-image: url(./이미지/q4-1.png);">
                    <div class="boxClick" num="1" data="b,f,g,c">
                        <span>가슴 뛰는<br>모험</span>
                    </div>
                </div>
            </td>
            <td>
                <div class="box" style="background-image: url(./이미지/q4-2.png);">
                    <div class="boxClick" num="2" data="e,e">
                        <span>치열한<br>스포츠</span>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="box" style="background-image: url(./이미지/q4-3.png);">
                    <div class="boxClick" num="3" data="d">
                        <span>내 곁의<br>사람들</span>
                    </div>
                </div>
            </td>
            <td>
                <div class="box" style="background-image: url(./이미지/q4-4.png);">
                    <div class="boxClick" num="4" data="g,h">
                        <span>나는 누구인가...<br>자아 탐구</span>
                    </div>
                </div>
            </td>
        </tr>
    
    </table>

    </div>

    <div class="question p-15" count="5" style="display: none;"> <!--한 질문페이즈 전체로 묶기--> 
        <div class="title">
            <span>Q5. 내가 즐겨 듣는 음악은?</span>
        </div>


    <table class="group">
        <tr style="height: 50%;">
            <td style="width: 50%;">
                <div class="box" style="background-image: url(./이미지/q5-1.png);">
                    <div class="boxClick" num="1" data="c,c,c">
                        <span>힙의 정석!<br>인디밴드</span>
                    </div>
                </div>
            </td>
            <td>
                <div class="box" style="background-image: url(./이미지/q5-2.png);">
                    <div class="boxClick" num="2" data="a">
                        <span>아름다운<br>클래식</span>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="box" style="background-image: url(./이미지/q5-3.png);">
                    <div class="boxClick" num="3" data="f,b">
                        <span>독특한<br>신스팝</span>
                    </div>
                </div>
            </td>
            <td>
                <div class="box" style="background-image: url(./이미지/q5-4.png);">
                    <div class="boxClick" num="4" data="a,g">
                        <span>인기차트 1위<br>발라드</span>
                    </div>
                </div>
            </td>
        </tr>
    
    </table>

    </div>

</div>

<div class="curtain" style="z-index: 10; display: flex;">

</div>







<script>
document.addEventListener('DOMContentLoaded', () => {
        
    let scores = {
        a: 0, b: 0, c: 0, d: 0,
        e: 0, f: 0, g: 0, h: 0
    };

    let currentQuestion = 1;
    let currentstep =1;
    const totalstep =5;

    
       
    let curtains = document.querySelector('.curtain');
    function curtainUp(top) {
        curtains.style.top = top;
    }
    let gobutton = document.querySelectorAll('#testgo');
    let introDiv = document.querySelector(`[name="produces"]`);
    let quizsDiv = document.querySelector(`[name="quizs"]`);

    gobutton.forEach(testgo => {
        testgo.addEventListener("click", e=> {
            function quizGo() {
                introDiv.style.display = 'none';
                quizsDiv.style.display = 'flex';
                curtains.style.height = "112%";
                setTimeout(()=> {
                    curtains.style.height = "110%";
                    curtainUp("-110vh");
                },150);
                setTimeout(()=> {
                    curtains.style.display = 'none';
                }, 700);
                }
            quizGo();
        });
    });

    function startAnimation() {
        const spans = document.querySelectorAll('.resultLoad span');
        let currentIndex = 0;
        //spans.forEach(span => {
        //    span.classList.remove('active', 'exit');
        //});
        function showNext() {
            if (currentIndex > 0 && currentIndex<spans.length) {
                spans[currentIndex - 1].classList.add('exit');
            }
            
            if (currentIndex < spans.length) {
                spans[currentIndex].classList.add('active');
                currentIndex++;
                setTimeout(showNext, 1000);
            }
        }
        showNext();
        
        let resultbutton=document.querySelector('.testend');
        setTimeout(()=> {
            resultbutton.classList.add('slide-up');
            }, 6000);
    }

    function quizEnd() {
        let load = document.querySelector('.result');
        let intro = document.querySelector('.intro');
        intro.style.display = 'none';
        load.style.display = 'flex';
        curtains.style.display = 'flex';
        curtainUp("-110vh");
        setTimeout(()=> {
            curtainUp("0vh");
        }, 100);
        setTimeout(()=> {
            quizsDiv.style.display = 'none';
            introDiv.style.display = 'flex';
        }, 1200);
        setTimeout(()=> {
            startAnimation();
        }, 1400);
    }

    function updateProgress(step) {
            const progressFill = document.querySelector('.progress-fill');
            const percentage = (step - 1) * 25; // 0, 25, 50, 75, 100
            
            progressFill.style.width = percentage + '%';
        }
        
        // 초기 상태
        updateProgress(1);

    function nextQuiz(clickedElement) {
        const variables = clickedElement.getAttribute('data');
        if (variables) {
            const variableList = variables.split(',');
            variableList.forEach(variable => {
                variable = variable.trim();
                if (scores.hasOwnProperty(variable)) {
                    scores[variable]++;
                }
            });
        }

        if (currentstep<totalstep) {
            currentstep++;
            updateProgress(currentstep);
        } 

        const currentQuestionDiv = document.querySelector(`[count="${currentQuestion}"]`);
        if (currentQuestionDiv) {
            currentQuestionDiv.classList.add('question-slide-up');
        
        //애니메이션 완료 후 문항 숨기기 및 다음 문항 표시
        setTimeout(() => {
            currentQuestionDiv.style.display = 'none';
            currentQuestionDiv.classList.remove('question-slide-up'); // 클래스 정리
            
            currentQuestion++;
            const nextQuestionDiv = document.querySelector(`[count="${currentQuestion}"]`);
            
            if (nextQuestionDiv) {
                nextQuestionDiv.style.display = 'flex';
                nextQuestionDiv.classList.add('question-slide-down');
                setTimeout(()=> {
                    nextQuestionDiv.classList.remove('question-slide-down');
                }, 300);
            } else {
                showResult();
                quizEnd();
            }
        }, 400);
    }
    }


        function showResult() {
            let maxScore = -1;
            let resultVariable = '';

            for (let variable in scores) {
                if (scores[variable] > maxScore) {
                    maxScore = scores[variable];
                    resultVariable = variable;
                }
            }
            console.log(`결과: ${resultVariable} (점수: ${maxScore})`);
            document.querySelector('.testend').addEventListener('click', function() {
            window.location.href = `./result${resultVariable.toUpperCase()}`;
            });
        }




            //선택한 boxClick에 지정되어있는 a~f 값 +1 (알파벳 다수일수도 있음)
            //현재 question div height 100->0만들고(위로 올라가게) display:none
            // 다음 count인 question div display:flex, height 0->100 
    

        const boxes = document.querySelectorAll('.box');
        let boxClicks =document.querySelectorAll('.boxClick');        

        boxClicks.forEach(boxClick => {
            boxClick.style.opacity = "0"; // 초기값 명시적 설정
        });

        boxClicks.forEach(boxClick => {
            boxClick.addEventListener("click", e=>{
            const element=boxClick;
            function changeOpacity(opacity) {
                element.style.opacity = opacity;
            }
            e.stopPropagation();
            const currentOpacity = element.style.opacity;
            if (currentOpacity === "0" || currentOpacity === "") {
                changeOpacity("1"); // 버튼 클릭 시 투명도를 1로 변경
            } else {
                nextQuiz(element); //여기에 문항넘어가는 함수 연결
            
        }});
       
            document.addEventListener("click",()=>{
            const element=boxClick;
            function changeOpacity(opacity) {
                element.style.opacity = opacity;
            }
            if (element.style.opacity === "1") {
                changeOpacity("0");
            }
        });
    });
});
        
</script>



</body>
